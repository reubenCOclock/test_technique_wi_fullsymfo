{% extends 'base.html.twig' %}

{% block body %}



{% for label, messages in app.flashes(['success']) %}
    {% for message in messages %}
        <div class="text-{{ label }}">
            {{ message }}
        </div>
    {% endfor %}
  {% endfor %}

  {% for label, messages in app.flashes(['error']) %}
    {% for message in messages %}
        <div class="text-danger">
            {{ message }}
        </div>
    {% endfor %}
  {% endfor %}
  
    
   <br/>
    <div class="d-flex flex-column align-items-center w-85">
       
        {{form_start(form)}}
        
            <div class="form-group">
                {{form_row(form.firstname)}}
            </div>

            <div class="form-group">
                {{form_row(form.lastname)}}
            </div>

            <div class="form-group">
                <div class="text-center text-info"> <span class="email-control-text">  </span> </div>
                {{form_row(form.email)}}
            </div>

            <div class="form-group">
                    {{form_row(form.telephone)}}
            </div>

            <div class="form-group">
                    {{form_row(form.address)}}
            </div>

            <div class="form-group">
                    {{form_row(form.zipcode)}}
            </div>

            <div class="form-group">
                    {{form_row(form.city)}}
            </div>

            <div class="form-group">
                    {{form_row(form.comment)}}
            </div>

             
                    <button type="submit" class=" w-100 btn-info btn-primary submit-btn"> Envoyer </button>
             
                
           
        
        
     {{form_end(form)}}
     </div>

      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
       <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>

       <script> 
            $(function(){
                console.log("dom loaded")
                const emailClass=$(".email-class");
                console.log("get email");
                console.log(emailClass);

                const getBtn=$(".submit-btn");
                
                
                
                emailClass.on("input",function(event){
                    console.log(event.target.value)
                    console.log(event.target.value.includes("@"))

                    if(!event.target.value.includes("@")){
                        getBtn.prop("disabled",true);
                        $(".email-control-text").html("")
                        $(".email-control-text").html("l'email doit imperativement inclure un @")
                    }

                    else{
                        getBtn.prop("disabled",false);
                        $(".email-control-text").html("");
                        
                    }
                   
                })

                
            })
       </script>
        
    });
{% endblock %}


    
      
    

